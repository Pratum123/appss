<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üìö ‡§™‡•ç‡§∞‡§∂‡•ç‡§®‡•ã‡§§‡•ç‡§§‡§∞‡•Ä ‡§ê‡§™ - ‡§∏‡•Å‡§ß‡§æ‡§∞‡§ø‡§§</title>
  <style>
    body {
      font-family: 'Segoe UI', 'Nirmala UI', sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
      margin: 0;
      padding: 0;
      color: #333;
    }
    header {
      background: linear-gradient(135deg, #3949ab, #283593);
      color: white;
      padding: 20px;
      font-size: 24px;
      text-align: center;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      position: relative;
      overflow: hidden;
    }
    header::before {
      content: "";
      position: absolute;
      top: -10px;
      left: -10px;
      right: -10px;
      bottom: -10px;
      background: linear-gradient(45deg, rgba(255,255,255,0.1) 0%, transparent 50%);
      z-index: 0;
    }
    .section {
      background: white;
      padding: 25px;
      border-radius: 16px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.08);
      max-width: 750px;
      margin: 30px auto;
      position: relative;
      border: 1px solid #e0e0e0;
    }
    textarea, input, select {
      width: 100%;
      padding: 14px;
      margin: 10px 0;
      border-radius: 10px;
      border: 1px solid #ddd;
      font-size: 16px;
      box-sizing: border-box;
      transition: all 0.3s;
      font-family: inherit;
    }
    textarea:focus, input:focus, select:focus {
      border-color: #3949ab;
      box-shadow: 0 0 0 3px rgba(57, 73, 171, 0.2);
      outline: none;
    }
    .btn {
      background: linear-gradient(135deg, #3949ab, #5c6bc0);
      color: white;
      font-weight: bold;
      border: none;
      padding: 14px 25px;
      border-radius: 10px;
      font-size: 17px;
      cursor: pointer;
      margin-top: 15px;
      transition: all 0.3s;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      display: inline-block;
      font-family: inherit;
    }
    .btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
    }
    .btn-option {
      display: block;
      width: 100%;
      text-align: left;
      padding: 14px 20px;
      border-radius: 10px;
      background: #f8f9fa;
      border: 1px solid #e0e0e0;
      margin: 10px 0;
      font-size: 17px;
      cursor: pointer;
      transition: all 0.2s;
      font-family: inherit;
    }
    .btn-option:hover {
      background: #e9ecef;
      border-color: #d0d0d0;
    }
    .explanation {
      margin-top: 25px;
      padding-top: 20px;
      border-top: 1px solid #eee;
      color: #555;
      line-height: 1.6;
      font-size: 16px;
    }
    .edit-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background: #FFC107;
      color: #000;
      border: none;
      padding: 8px 12px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      transition: all 0.2s;
    }
    .edit-btn:hover {
      background: #ffb300;
    }
    .question-item {
      padding: 15px 0;
      border-bottom: 1px solid #eee;
      position: relative;
      transition: background 0.3s;
    }
    .question-item:hover {
      background-color: #f9f9f9;
    }
    .submit-btn {
      background: linear-gradient(135deg, #4CAF50, #66BB6A);
    }
    .accuracy-display {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 36px;
      font-weight: bold;
      color: #3949ab;
      text-align: center;
      text-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .question-container {
      position: relative;
      padding: 20px;
      background: #fff;
      border-radius: 12px;
      margin-bottom: 20px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.08);
      border: 1px solid #eaeaea;
    }
    .question-text {
      font-weight: bold;
      margin-bottom: 15px;
      font-size: 18px;
      line-height: 1.5;
    }
    .statement {
      font-weight: normal;
      color: #555;
      margin: 8px 0;
      line-height: 1.5;
      font-size: 16px;
    }
    .image-preview-container {
      margin: 20px 0;
      text-align: center;
      width: 100%;
      height: 220px;
      border: 2px dashed #ddd;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      background: #fafafa;
    }
    .image-preview {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }
    .remove-image-btn {
      background: #f44336;
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 10px;
      font-size: 14px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      transition: all 0.2s;
    }
    .remove-image-btn:hover {
      background: #e53935;
    }
    .upload-btn-wrapper {
      position: relative;
      overflow: hidden;
      display: inline-block;
      width: 100%;
      margin: 10px 0;
    }
    .upload-btn {
      background: #e3f2fd;
      color: #1976d2;
      border: 2px dashed #64b5f6;
      padding: 20px;
      border-radius: 12px;
      font-size: 17px;
      font-weight: bold;
      cursor: pointer;
      text-align: center;
      display: block;
      transition: all 0.3s;
    }
    .upload-btn:hover {
      background: #bbdefb;
    }
    .upload-btn-wrapper input[type=file] {
      position: absolute;
      left: 0;
      top: 0;
      opacity: 0;
      width: 100%;
      height: 100%;
      cursor: pointer;
    }
    .question-image-container {
      width: 100%;
      height: 50vh;
      min-height: 250px;
      max-height: 350px;
      margin: 20px 0;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      border-radius: 12px;
      background: #f8f9fa;
      border: 1px solid #e0e0e0;
      box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
    }
    .question-image {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
    }
    .paste-section {
      background: #e3f2fd;
      padding: 25px;
      border-radius: 12px;
      margin-bottom: 25px;
      border-left: 5px solid #3949ab;
      box-shadow: 0 3px 8px rgba(0,0,0,0.05);
    }
    .paste-btn {
      background: linear-gradient(135deg, #2196F3, #21CBF3);
      color: white;
      width: 100%;
      padding: 15px;
      font-size: 18px;
      margin-top: 15px;
    }
    .paste-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 12px rgba(33, 150, 243, 0.25);
    }
    .format-example {
      background: white;
      padding: 15px;
      border-radius: 8px;
      margin-top: 15px;
      font-size: 14px;
      border: 1px solid #bbdefb;
    }
    .format-title {
      font-weight: bold;
      margin-bottom: 10px;
      color: #1976d2;
      display: flex;
      align-items: center;
    }
    .format-title svg {
      margin-right: 8px;
    }
    .highlight-box {
      background: #fffde7;
      border: 1px solid #ffecb3;
      border-radius: 8px;
      padding: 15px;
      margin: 15px 0;
    }
    .tab-container {
      display: flex;
      margin-bottom: 20px;
      border-bottom: 2px solid #e0e0e0;
    }
    .tab {
      padding: 12px 25px;
      cursor: pointer;
      font-weight: bold;
      border-radius: 8px 8px 0 0;
      background: #f5f5f5;
      margin-right: 5px;
      transition: all 0.3s;
    }
    .tab.active {
      background: #3949ab;
      color: white;
    }
    @media (max-width: 600px) {
      .section {
        padding: 20px 15px;
        margin: 20px 10px;
      }
      .question-image-container {
        height: 35vh;
        max-height: 250px;
      }
      .btn {
        padding: 12px 20px;
        font-size: 16px;
      }
    }
    .welcome-container {
      text-align: center;
      padding: 40px 20px;
    }
    .welcome-title {
      font-size: 32px;
      color: #3949ab;
      margin-bottom: 20px;
    }
    .welcome-description {
      font-size: 18px;
      color: #555;
      margin-bottom: 30px;
      line-height: 1.6;
    }
    .mode-buttons {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 30px;
      flex-wrap: wrap;
    }
    .mode-btn {
      padding: 18px 35px;
      font-size: 20px;
      min-width: 250px;
      border-radius: 12px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }
    .mode-btn i {
      font-size: 36px;
    }
    .feature-box {
      display: flex;
      align-items: center;
      gap: 15px;
      margin: 20px 0;
      padding: 15px;
      background: #f9f9f9;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }
    .feature-icon {
      font-size: 24px;
      color: #3949ab;
      min-width: 40px;
    }
    .success-message {
      background-color: #4CAF50;
      color: white;
      padding: 15px;
      border-radius: 8px;
      margin: 15px 0;
      text-align: center;
      font-weight: bold;
    }
    .error-message {
      background-color: #f44336;
      color: white;
      padding: 15px;
      border-radius: 8px;
      margin: 15px 0;
      text-align: center;
      font-weight: bold;
    }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
<header>
  <div style="max-width: 800px; margin: 0 auto;">
    <div style="display: flex; align-items: center; justify-content: center; gap: 15px;">
      <div style="font-size: 36px;">üìö</div>
      <div>
        <div>‡§™‡•ç‡§∞‡§∂‡•ç‡§®‡•ã‡§§‡•ç‡§§‡§∞‡•Ä ‡§ê‡§™ - ‡§∏‡•Å‡§ß‡§æ‡§∞‡§ø‡§§</div>
        <div style="font-size: 18px; opacity: 0.9; margin-top: 5px;">‡§™‡•á‡§∏‡•ç‡§ü ‡§∏‡•Å‡§µ‡§ø‡§ß‡§æ ‡§Æ‡•á‡§Ç ‡§∏‡•Å‡§ß‡§æ‡§∞ ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ</div>
      </div>
    </div>
  </div>
</header>

<div id="welcomeSection" class="section">
  <div class="welcome-container">
    <h1 class="welcome-title">‡§™‡•ç‡§∞‡§∂‡•ç‡§®‡•ã‡§§‡•ç‡§§‡§∞‡•Ä ‡§ê‡§™ ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à</h1>
    <p class="welcome-description">‡§Ö‡§¨ ‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§¨‡§æ‡§¶ "‡§∏‡§≠‡•Ä ‡§´‡§º‡•Ä‡§≤‡•ç‡§° ‡§≠‡§∞‡•á‡§Ç" ‡§ï‡•Ä ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§π‡§≤ ‡§π‡•ã ‡§ó‡§à ‡§π‡•à!</p>
    
    <div class="success-message">
      <i class="fas fa-check-circle"></i> ‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§∏‡•á‡§µ ‡§ï‡§∞‡§®‡•á ‡§ï‡•Ä ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§π‡§≤ ‡§ï‡§∞ ‡§¶‡•Ä ‡§ó‡§à ‡§π‡•à
    </div>
    
    <div class="mode-buttons">
      <button class="btn mode-btn" onclick="startQuiz('input')">
        <i class="fas fa-plus-circle"></i>
        <span>‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§ú‡•ã‡§°‡§º‡•á‡§Ç</span>
      </button>
      <button class="btn mode-btn" onclick="startQuiz('practice')">
        <i class="fas fa-brain"></i>
        <span>‡§Ö‡§≠‡•ç‡§Ø‡§æ‡§∏ ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç</span>
      </button>
    </div>
    
    <div style="margin-top: 50px; text-align: left;">
      <h3 style="color: #3949ab; border-bottom: 2px solid #3949ab; padding-bottom: 10px;">‡§ê‡§™ ‡§ï‡•Ä ‡§µ‡§ø‡§∂‡•á‡§∑‡§§‡§æ‡§è‡§Ç:</h3>
      
      <div class="feature-box">
        <div class="feature-icon"><i class="fas fa-paste"></i></div>
        <div>
          <h4>‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§¨‡•ç‡§≤‡•â‡§ï ‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç</h4>
          <p>‡§∏‡•Å‡§ß‡§æ‡§∞‡§ø‡§§ ‡§™‡§æ‡§∞‡•ç‡§∏‡§ø‡§Ç‡§ó ‡§∏‡•á ‡§Ö‡§¨ ‡§ï‡•ã‡§à ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø ‡§®‡§π‡•Ä‡§Ç</p>
        </div>
      </div>
      
      <div class="feature-box">
        <div class="feature-icon"><i class="fas fa-check-circle"></i></div>
        <div>
          <h4>‡§∏‡•Å‡§ß‡§æ‡§∞‡§ø‡§§ ‡§∏‡•á‡§µ ‡§´‡•Ä‡§ö‡§∞</h4>
          <p>‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§Ö‡§¨ "‡§∏‡§≠‡•Ä ‡§´‡§º‡•Ä‡§≤‡•ç‡§° ‡§≠‡§∞‡•á‡§Ç" ‡§ï‡•Ä ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§®‡§π‡•Ä‡§Ç</p>
        </div>
      </div>
      
      <div class="feature-box">
        <div class="feature-icon"><i class="fas fa-image"></i></div>
        <div>
          <h4>‡§õ‡§µ‡§ø‡§Ø‡§æ‡§Å ‡§ú‡•ã‡§°‡§º‡•á‡§Ç</h4>
          <p>‡§Ö‡§™‡§®‡•á ‡§™‡•ç‡§∞‡§∂‡•ç‡§®‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§õ‡§µ‡§ø‡§Ø‡§æ‡§Å ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç</p>
        </div>
      </div>
    </div>
  </div>
</div>

<div id="inputSection" class="section" style="display:none;">
  <div class="tab-container">
    <div class="tab active" onclick="showTab('addTab')">‚ûï ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§ú‡•ã‡§°‡§º‡•á‡§Ç</div>
    <div class="tab" onclick="showTab('pasteTab')">üìã ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç</div>
  </div>
  
  <div id="pasteTab" style="display:none;">
    <div class="paste-section">
      <h3><i class="fas fa-paste"></i> ‡§™‡•ç‡§∞‡§∂‡•ç‡§®‡•ã‡§Ç ‡§ï‡§æ ‡§¨‡•ç‡§≤‡•â‡§ï ‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç</h3>
      <textarea id="pasteArea" placeholder="‡§Ø‡§π‡§æ‡§Å ‡§™‡•ç‡§∞‡§∂‡•ç‡§®‡•ã‡§Ç ‡§ï‡§æ ‡§¨‡•ç‡§≤‡•â‡§ï ‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç:
‡§â‡§¶‡§æ‡§π‡§∞‡§£:
‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§ü‡•á‡§ï‡•ç‡§∏‡§ü
(A) ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ A
(B) ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ B
(C) ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ C
(D) ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ D
‚úÖ ‡§∏‡§π‡•Ä ‡§â‡§§‡•ç‡§§‡§∞: (A)
üìò ‡§µ‡•ç‡§Ø‡§æ‡§ñ‡•ç‡§Ø‡§æ: ‡§Ø‡§π‡§æ‡§Å ‡§µ‡•ç‡§Ø‡§æ‡§ñ‡•ç‡§Ø‡§æ" 
                rows="8" style="font-family: monospace; padding: 15px;"></textarea>
      
      <div class="highlight-box">
        <div class="format-title">
          <i class="fas fa-info-circle"></i> ‡§´‡•â‡§∞‡•ç‡§Æ‡•á‡§ü ‡§®‡•ã‡§ü‡•ç‡§∏
        </div>
        <ul style="margin: 10px 0; padding-left: 20px;">
          <li>‡§™‡§π‡§≤‡•Ä ‡§≤‡§æ‡§á‡§®: ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü</li>
          <li>‡§Ö‡§ó‡§≤‡•Ä 4 ‡§≤‡§æ‡§á‡§®‡•á‡§Ç: (A), (B), (C), (D) ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™</li>
          <li>‚úÖ ‡§∏‡§π‡•Ä ‡§â‡§§‡•ç‡§§‡§∞: (X) ‡§´‡•â‡§∞‡•ç‡§Æ‡•á‡§ü ‡§Æ‡•á‡§Ç (‡§ú‡§π‡§æ‡§Å X A, B, C ‡§Ø‡§æ D ‡§π‡•à)</li>
          <li>üìò ‡§µ‡•ç‡§Ø‡§æ‡§ñ‡•ç‡§Ø‡§æ: ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§µ‡•ç‡§Ø‡§æ‡§ñ‡•ç‡§Ø‡§æ (‡§è‡§ï ‡§Ø‡§æ ‡§Ö‡§ß‡§ø‡§ï ‡§≤‡§æ‡§á‡§®)</li>
        </ul>
      </div>
      
      <button class="btn paste-btn" onclick="parsePastedText()">
        <i class="fas fa-magic"></i> ‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§ø‡§è ‡§ó‡§è ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§ï‡•ã ‡§™‡§æ‡§∞‡•ç‡§∏ ‡§ï‡§∞‡•á‡§Ç
      </button>
      
      <div class="format-example">
        <div class="format-title">
          <i class="fas fa-lightbulb"></i> ‡§â‡§¶‡§æ‡§π‡§∞‡§£:
        </div>
        <pre style="margin: 0; font-family: monospace; white-space: pre-wrap;">
Phillips Curve ‡§ï‡•ã ‡§Ö‡§∞‡•ç‡§•‡§∂‡§æ‡§∏‡•ç‡§§‡•ç‡§∞ ‡§Æ‡•á‡§Ç ‡§ï‡•ç‡§Ø‡•ã‡§Ç ‡§Æ‡§π‡§§‡•ç‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§Æ‡§æ‡§®‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à?
(A) ‡§Ø‡§π ‡§Æ‡•Å‡§¶‡•ç‡§∞‡§æ ‡§Ü‡§™‡•Ç‡§∞‡•ç‡§§‡§ø ‡§¶‡§∞‡•ç‡§∂‡§æ‡§§‡§æ ‡§π‡•à
(B) ‡§Ø‡§π ‡§∞‡§æ‡§ú‡§ï‡•ã‡§∑‡•Ä‡§Ø ‡§ò‡§æ‡§ü‡•á ‡§ï‡•Ä ‡§ó‡§£‡§®‡§æ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à
(C) ‡§Ø‡§π ‡§Æ‡•Å‡§¶‡•ç‡§∞‡§æ‡§∏‡•ç‡§´‡•Ä‡§§‡§ø ‡§î‡§∞ ‡§¨‡•á‡§∞‡•ã‡§ú‡§ó‡§æ‡§∞‡•Ä ‡§ï‡•á ‡§¨‡•Ä‡§ö ‡§∏‡§Ç‡§¨‡§Ç‡§ß ‡§¨‡§§‡§æ‡§§‡§æ ‡§π‡•à
(D) ‡§Ø‡§π ‡§ï‡•á‡§µ‡§≤ ‡§¶‡•Ä‡§∞‡•ç‡§ò‡§ï‡§æ‡§≤‡§ø‡§ï ‡§®‡§ø‡§µ‡•á‡§∂ ‡§∞‡§£‡§®‡•Ä‡§§‡§ø ‡§π‡•à
‚úÖ ‡§∏‡§π‡•Ä ‡§â‡§§‡•ç‡§§‡§∞: (C)
üìò ‡§µ‡•ç‡§Ø‡§æ‡§ñ‡•ç‡§Ø‡§æ:
Phillips Curve ‡§ï‡§æ ‡§Æ‡§π‡§§‡•ç‡§µ ‡§á‡§∏ ‡§ï‡§æ‡§∞‡§£ ‡§π‡•à ‡§ï‡•ç‡§Ø‡•ã‡§Ç‡§ï‡§ø ‡§Ø‡§π ‡§®‡•Ä‡§§‡§ø-‡§®‡§ø‡§∞‡•ç‡§Æ‡§æ‡§§‡§æ‡§ì‡§Ç ‡§ï‡•ã ‡§Ø‡§π ‡§∏‡§Æ‡§ù‡§®‡•á ‡§Æ‡•á‡§Ç ‡§Æ‡§¶‡§¶ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à ‡§ï‡§ø ‡§è‡§ï ‡§≤‡§ï‡•ç‡§∑‡•ç‡§Ø (‡§ú‡•à‡§∏‡•á ‡§¨‡•á‡§∞‡•ã‡§ú‡§º‡§ó‡§æ‡§∞‡•Ä ‡§ï‡§Æ ‡§ï‡§∞‡§®‡§æ) ‡§π‡§æ‡§∏‡§ø‡§≤ ‡§ï‡§∞‡§®‡•á ‡§™‡§∞ ‡§¶‡•Ç‡§∏‡§∞‡•á ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ (‡§ú‡•à‡§∏‡•á ‡§Æ‡•Å‡§¶‡•ç‡§∞‡§æ‡§∏‡•ç‡§´‡•Ä‡§§‡§ø) ‡§Æ‡•á‡§Ç ‡§ï‡•ç‡§Ø‡§æ ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ ‡§™‡§°‡§º ‡§∏‡§ï‡§§‡§æ ‡§π‡•à‡•§</pre>
      </div>
    </div>
  </div>
  
  <div id="addTab">
    <h3><i class="fas fa-plus-circle"></i> ‡§®‡§Ø‡§æ ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§ú‡•ã‡§°‡§º‡•á‡§Ç</h3>
    <textarea id="question" placeholder="‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§≤‡§ø‡§ñ‡•á‡§Ç (‡§¨‡•ã‡§≤‡•ç‡§° ‡§¶‡§ø‡§ñ‡•á‡§ó‡§æ)"></textarea>
    
    <div class="upload-btn-wrapper">
      <div class="upload-btn">
        <i class="fas fa-camera"></i> ‡§õ‡§µ‡§ø ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç (‡§µ‡•à‡§ï‡§≤‡•ç‡§™‡§ø‡§ï)
      </div>
      <input type="file" id="imageUpload" accept="image/*">
    </div>
    
    <div class="image-preview-container">
      <img id="imagePreview" class="image-preview" alt="‡§õ‡§µ‡§ø ‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§µ‡§≤‡•ã‡§ï‡§®" style="display:none;">
      <button id="removeImageBtn" class="remove-image-btn" style="display:none;">
        <i class="fas fa-trash"></i> ‡§õ‡§µ‡§ø ‡§π‡§ü‡§æ‡§è‡§Ç
      </button>
    </div>
    
    <input id="optA" placeholder="‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ A">
    <input id="optB" placeholder="‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ B">
    <input id="optC" placeholder="‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ C">
    <input id="optD" placeholder="‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ D">
    <select id="correct">
      <option value="A">A</option>
      <option value="B">B</option>
      <option value="C">C</option>
      <option value="D">D</option>
    </select>
    <textarea id="explanation" placeholder="‡§µ‡•ç‡§Ø‡§æ‡§ñ‡•ç‡§Ø‡§æ ‡§≤‡§ø‡§ñ‡•á‡§Ç (‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü)"></textarea>
    <button class="btn" onclick="saveQuestion()">
      <i class="fas fa-save"></i> ‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç
    </button>
    <div id="questionCount" style="margin-top: 20px; font-size: 17px; text-align: center; font-weight: bold; color: #3949ab;"></div>
    <div id="questionList" style="margin-top: 20px;"></div>
  </div>
</div>

<div id="practiceSection" class="section" style="display:none;">
  <h3><i class="fas fa-brain"></i> ‡§Ö‡§≠‡•ç‡§Ø‡§æ‡§∏ ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç</h3>
  <div id="progress" style="font-size: 18px; font-weight: bold; text-align: center; color: #3949ab; margin: 15px 0;"></div>
  <div id="gotoContainer" style="display: flex; gap: 10px; margin-top: 20px;">
    <input id="gotoInput" type="number" placeholder="‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç" style="flex: 1; padding: 12px;">
    <button id="gotoBtn" onclick="goToQuestion()" class="btn">
      <i class="fas fa-arrow-right"></i> ‡§ú‡§æ‡§è‡§Ç
    </button>
  </div>
  <div id="quizQuestionContainer" style="margin-top: 25px;">
    <div id="quizQuestion" class="question-container"></div>
  </div>
  <div id="quizOptions"></div>
</div>

<div id="resultSection" class="section" style="display:none;">
  <div class="result-card">
    <h3 style="text-align:center; color:#3949ab;">
      <i class="fas fa-chart-line"></i> ‡§Ü‡§™‡§ï‡•á ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ
    </h3>
    <div style="display:flex; flex-wrap:wrap; gap:25px; justify-content:center; align-items:center; margin-top: 30px;">
      <div style="flex:1; min-width:250px;">
        <div style="background:#f9f9f9; padding:20px; border-radius:12px; box-shadow: 0 3px 8px rgba(0,0,0,0.05);">
          <p style="font-size: 18px;"><strong><i class="fas fa-list"></i> ‡§ï‡•Å‡§≤ ‡§™‡•ç‡§∞‡§∂‡•ç‡§®:</strong> <span id="totalQuestions">0</span></p>
          <p style="font-size: 18px;"><strong><i class="fas fa-check-circle"></i> ‡§∏‡§π‡•Ä ‡§â‡§§‡•ç‡§§‡§∞:</strong> <span id="correctAnswers">0</span></p>
          <p style="font-size: 18px;"><strong><i class="fas fa-times-circle"></i> ‡§ó‡§≤‡§§ ‡§â‡§§‡•ç‡§§‡§∞:</strong> <span id="incorrectAnswers">0</span></p>
          <p style="font-size: 18px;"><strong><i class="fas fa-percentage"></i> ‡§∏‡§ü‡•Ä‡§ï‡§§‡§æ:</strong> <span id="accuracyPercent" style="font-weight:bold; color:#3949ab;">0%</span></p>
        </div>
        <button class="btn" onclick="showWelcomeScreen()" style="margin-top:25px; width:100%;">
          <i class="fas fa-home"></i> ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§Æ‡•á‡§®‡•Ç ‡§™‡§∞ ‡§µ‡§æ‡§™‡§∏ ‡§ú‡§æ‡§è‡§Ç
        </button>
      </div>
      <div style="position:relative; width:280px; height:280px;">
        <canvas id="resultChart"></canvas>
        <div class="accuracy-display">
          <span id="bigAccuracy">0%</span>
          <div style="font-size:16px; color:#666; margin-top:5px;">‡§∏‡§ü‡•Ä‡§ï‡§§‡§æ</div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
let questions = [];
let currentQuestion = 0;
let correctCount = 0;
let incorrectCount = 0;
let editIndex = -1;
let currentImage = null;

// ‡§∏‡•ç‡§ü‡•ã‡§∞‡•á‡§ú ‡§∏‡•á ‡§°‡•á‡§ü‡§æ ‡§≤‡•ã‡§° ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§´‡§º‡§Ç‡§ï‡•ç‡§∂‡§®
function safeGetStorage(key, defaultValue) {
  try {
    const value = localStorage.getItem(key);
    return value !== null ? value : defaultValue;
  } catch (e) {
    console.error("localStorage ‡§∏‡•á ‡§°‡•á‡§ü‡§æ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø:", e);
    return defaultValue;
  }
}

// ‡§µ‡•á‡§≤‡§ï‡§Æ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§¶‡§ø‡§ñ‡§æ‡§è‡§Ç
function showWelcomeScreen() {
  document.getElementById("welcomeSection").style.display = "block";
  document.getElementById("inputSection").style.display = "none";
  document.getElementById("practiceSection").style.display = "none";
  document.getElementById("resultSection").style.display = "none";
}

// ‡§ï‡•ç‡§µ‡§ø‡§ú‡§º ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç
function startQuiz(mode) {
  document.getElementById("welcomeSection").style.display = "none";
  
  try {
    localStorage.setItem("quizMode", mode);
    populateQuiz();
  } catch (e) {
    alert(`‡§§‡•ç‡§∞‡•Å‡§ü‡§ø: ${e.message}`);
    showWelcomeScreen();
  }
}

// ‡§ü‡•à‡§¨ ‡§¶‡§ø‡§ñ‡§æ‡§®‡•á ‡§ï‡§æ ‡§´‡§Ç‡§ï‡•ç‡§∂‡§®
function showTab(tabId) {
  document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
  event.currentTarget.classList.add('active');
  
  document.getElementById('pasteTab').style.display = 'none';
  document.getElementById('addTab').style.display = 'none';
  
  document.getElementById(tabId).style.display = 'block';
}

// ‡§õ‡§µ‡§ø ‡§Ö‡§™‡§≤‡•ã‡§° ‡§π‡•á‡§Ç‡§°‡§≤‡§∞
document.getElementById("imageUpload").addEventListener("change", function(event) {
  const file = event.target.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = function(e) {
      currentImage = e.target.result;
      document.getElementById("imagePreview").src = currentImage;
      document.getElementById("imagePreview").style.display = "block";
      document.getElementById("removeImageBtn").style.display = "block";
    };
    reader.readAsDataURL(file);
  }
});

// ‡§õ‡§µ‡§ø ‡§π‡§ü‡§æ‡§®‡•á ‡§ï‡§æ ‡§¨‡§ü‡§®
document.getElementById("removeImageBtn").addEventListener("click", function() {
  currentImage = null;
  document.getElementById("imagePreview").src = "";
  document.getElementById("imagePreview").style.display = "none";
  document.getElementById("removeImageBtn").style.display = "none";
  document.getElementById("imageUpload").value = "";
});

// ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§∏‡•á‡§µ ‡§ï‡§∞‡§®‡§æ - ‡§∏‡•Å‡§ß‡§æ‡§∞‡§ø‡§§ ‡§∏‡§Ç‡§∏‡•ç‡§ï‡§∞‡§£
function saveQuestion() {
  const q = document.getElementById("question").value.trim();
  const A = document.getElementById("optA").value.trim();
  const B = document.getElementById("optB").value.trim();
  const C = document.getElementById("optC").value.trim();
  const D = document.getElementById("optD").value.trim();
  const correct = document.getElementById("correct").value;
  const exp = document.getElementById("explanation").value.trim();
  
  // ‡§µ‡§ø‡§∏‡•ç‡§§‡•É‡§§ ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø ‡§∏‡§Ç‡§¶‡•á‡§∂
  let errorMsg = "";
  if (!q) errorMsg += "‚Ä¢ ‡§™‡•ç‡§∞‡§∂‡•ç‡§®\n";
  if (!A) errorMsg += "‚Ä¢ ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ A\n";
  if (!B) errorMsg += "‚Ä¢ ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ B\n";
  if (!C) errorMsg += "‚Ä¢ ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ C\n";
  if (!D) errorMsg += "‚Ä¢ ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ D\n";
  
  if (errorMsg) {
    alert("‚ùó ‡§ï‡•É‡§™‡§Ø‡§æ ‡§®‡§ø‡§Æ‡•ç‡§®‡§≤‡§ø‡§ñ‡§ø‡§§ ‡§´‡§º‡•Ä‡§≤‡•ç‡§° ‡§≠‡§∞‡•á‡§Ç:\n" + errorMsg);
    return;
  }
  
  const newQ = {
    question: q,
    options: { A, B, C, D },
    correct,
    explanation: exp,
    image: currentImage
  };
  
  if (editIndex >= 0) {
    questions[editIndex] = newQ;
    editIndex = -1;
    alert("‚úÖ ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§Ö‡§™‡§°‡•á‡§ü ‡§π‡•ã ‡§ó‡§Ø‡§æ!");
  } else {
    questions.push(newQ);
    alert("‚úÖ ‡§®‡§Ø‡§æ ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§ú‡•ã‡§°‡§º‡§æ ‡§ó‡§Ø‡§æ!");
  }
  
  const currentKey = `quiz_demo_demo`;
  try {
    localStorage.setItem(currentKey, JSON.stringify(questions));
  } catch (e) {
    console.error("localStorage ‡§Æ‡•á‡§Ç ‡§∏‡•á‡§µ ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø:", e);
  }
  
  // ‡§´‡•â‡§∞‡•ç‡§Æ ‡§∞‡•Ä‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç
  document.getElementById("question").value = '';
  document.getElementById("optA").value = '';
  document.getElementById("optB").value = '';
  document.getElementById("optC").value = '';
  document.getElementById("optD").value = '';
  document.getElementById("explanation").value = '';
  document.getElementById("correct").value = 'A';
  
  // ‡§õ‡§µ‡§ø ‡§´‡§º‡•Ä‡§≤‡•ç‡§° ‡§∞‡•Ä‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç
  currentImage = null;
  document.getElementById("imagePreview").src = "";
  document.getElementById("imagePreview").style.display = "none";
  document.getElementById("removeImageBtn").style.display = "none";
  document.getElementById("imageUpload").value = "";
  
  document.getElementById("questionCount").textContent = `üî¢ ‡§ï‡•Å‡§≤ ‡§™‡•ç‡§∞‡§∂‡•ç‡§®: ${questions.length}`;
  showAllQuestions();
}

// ‡§∏‡§≠‡•Ä ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§¶‡§ø‡§ñ‡§æ‡§®‡§æ
function showAllQuestions() {
  const listDiv = document.getElementById("questionList");
  listDiv.innerHTML = '';
  
  if (questions.length === 0) {
    listDiv.innerHTML = '<div style="text-align:center; padding:20px; color:#666;">‡§ï‡•ã‡§à ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§®‡§π‡•Ä‡§Ç ‡§ú‡•ã‡§°‡§º‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à</div>';
    return;
  }
  
  questions.forEach((q, index) => {
    const div = document.createElement("div");
    div.className = "question-item";
    div.innerHTML = `
      <div style="position:relative; padding-right: 40px;">
        <button class="edit-btn" onclick="editQuestion(${index})">
          <i class="fas fa-edit"></i> ‡§∏‡§Ç‡§™‡§æ‡§¶‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç
        </button>
        <div class="question-text">Q${index + 1}: ${formatQuestionText(q.question)}</div>
        ${q.image ? '<div style="font-size:14px; color:#666; margin-top:10px; background:#e3f2fd; padding:8px; border-radius:6px; display:inline-block;"><i class="fas fa-image"></i> ‡§õ‡§µ‡§ø ‡§ú‡•Å‡§°‡§º‡•Ä ‡§π‡•Å‡§à ‡§π‡•à</div>' : ''}
      </div>
    `;
    listDiv.appendChild(div);
  });
}

// ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§ü‡•á‡§ï‡•ç‡§∏‡§ü ‡§´‡•â‡§∞‡•ç‡§Æ‡•á‡§ü ‡§ï‡§∞‡§®‡§æ
function formatQuestionText(text) {
  const parts = text.split('\n');
  let result = `<strong>${parts[0]}</strong>`;
  
  if (parts.length > 1) {
    for (let i = 1; i < parts.length; i++) {
      if (parts[i].trim() !== '') {
        result += `<div class="statement">${parts[i]}</div>`;
      }
    }
  }
  
  return result;
}

// ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§∏‡§Ç‡§™‡§æ‡§¶‡§ø‡§§ ‡§ï‡§∞‡§®‡§æ
function editQuestion(index) {
  const q = questions[index];
  document.getElementById("question").value = q.question;
  document.getElementById("optA").value = q.options.A;
  document.getElementById("optB").value = q.options.B;
  document.getElementById("optC").value = q.options.C;
  document.getElementById("optD").value = q.options.D;
  document.getElementById("correct").value = q.correct;
  document.getElementById("explanation").value = q.explanation;
  
  if (q.image) {
    currentImage = q.image;
    document.getElementById("imagePreview").src = q.image;
    document.getElementById("imagePreview").style.display = "block";
    document.getElementById("removeImageBtn").style.display = "block";
  } else {
    currentImage = null;
    document.getElementById("imagePreview").style.display = "none";
    document.getElementById("removeImageBtn").style.display = "none";
  }
  
  editIndex = index;
  
  document.getElementById("inputSection").style.display = "block";
  document.getElementById("practiceSection").style.display = "none";
  showTab('addTab');
}

// ‡§µ‡§ø‡§∂‡§ø‡§∑‡•ç‡§ü ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§™‡§∞ ‡§ú‡§æ‡§®‡§æ
function goToQuestion() {
  const input = parseInt(document.getElementById("gotoInput").value);
  if (!input || input < 1 || input > questions.length) {
    alert(`‚ö†Ô∏è ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç (1 ‡§∏‡•á ${questions.length} ‡§ï‡•á ‡§¨‡•Ä‡§ö)`);
    return;
  }
  currentQuestion = input - 1;
  showQuestion();
}

// ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§¶‡§ø‡§ñ‡§æ‡§®‡§æ
function showQuestion() {
  const q = questions[currentQuestion];
  
  let imageHTML = '';
  if (q.image) {
    imageHTML = `
      <div class="question-image-container">
        <img src="${q.image}" class="question-image" alt="‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§õ‡§µ‡§ø">
      </div>
    `;
  }
  
  const quizQuestionHTML = `
    <div id="quizQuestion" class="question-container">
      <button class="edit-btn" onclick="editCurrentQuestion()">
        <i class="fas fa-edit"></i> ‡§∏‡§Ç‡§™‡§æ‡§¶‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç
      </button>
      <div class="question-text">üìò ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ${currentQuestion + 1}/${questions.length}: ${formatQuestionText(q.question)}</div>
      ${imageHTML}
    </div>
  `;
  
  document.getElementById("quizQuestionContainer").innerHTML = quizQuestionHTML;
  
  const optionsDiv = document.getElementById("quizOptions");
  optionsDiv.innerHTML = '';
  
  for (let key in q.options) {
    const btn = document.createElement("button");
    btn.className = "btn-option";
    btn.innerHTML = `<strong>${key}:</strong> ${q.options[key]}`;
    btn.onclick = () => handleAnswer(key);
    optionsDiv.appendChild(btn);
  }
  
  const submitBtn = document.createElement("button");
  submitBtn.innerHTML = "<i class='fas fa-check-circle'></i> ‡§ï‡•ç‡§µ‡§ø‡§ú‡§º ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡•á‡§Ç";
  submitBtn.className = "btn submit-btn";
  submitBtn.onclick = () => {
    if (confirm(`‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§µ‡§æ‡§ï‡§à ‡§ï‡•ç‡§µ‡§ø‡§ú‡§º ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?\n‡§Ü‡§™‡§®‡•á ${correctCount + incorrectCount} ‡§™‡•ç‡§∞‡§∂‡•ç‡§®‡•ã‡§Ç ‡§ï‡•á ‡§â‡§§‡•ç‡§§‡§∞ ‡§¶‡§ø‡§è ‡§π‡•à‡§Ç‡•§`)) {
      submitQuiz();
    }
  };
  optionsDiv.appendChild(submitBtn);
  
  document.getElementById("progress").textContent = `üìò ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ${currentQuestion + 1} / ${questions.length}`;
  document.getElementById("gotoInput").value = currentQuestion + 1;
}

// ‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§∏‡§Ç‡§™‡§æ‡§¶‡§ø‡§§ ‡§ï‡§∞‡§®‡§æ
function editCurrentQuestion() {
  const q = questions[currentQuestion];
  
  document.getElementById("inputSection").style.display = "block";
  document.getElementById("practiceSection").style.display = "none";
  
  document.getElementById("question").value = q.question;
  document.getElementById("optA").value = q.options.A;
  document.getElementById("optB").value = q.options.B;
  document.getElementById("optC").value = q.options.C;
  document.getElementById("optD").value = q.options.D;
  document.getElementById("correct").value = q.correct;
  document.getElementById("explanation").value = q.explanation;
  
  if (q.image) {
    currentImage = q.image;
    document.getElementById("imagePreview").src = q.image;
    document.getElementById("imagePreview").style.display = "block";
    document.getElementById("removeImageBtn").style.display = "block";
  } else {
    currentImage = null;
    document.getElementById("imagePreview").style.display = "none";
    document.getElementById("removeImageBtn").style.display = "none";
  }
  
  editIndex = currentQuestion;
  showTab('addTab');
}

// ‡§â‡§§‡•ç‡§§‡§∞ ‡§∏‡§Ç‡§≠‡§æ‡§≤‡§®‡§æ
function handleAnswer(selected) {
  const q = questions[currentQuestion];
  const optionsDiv = document.getElementById("quizOptions");
  
  document.querySelectorAll(".btn-option").forEach(btn => btn.disabled = true);
  
  for (let btn of optionsDiv.children) {
    if (btn.className !== "btn-option") continue;
    
    const key = btn.innerHTML.match(/<strong>([A-D])/)[1];
    if (key === q.correct) {
      btn.style.backgroundColor = "#4CAF50";
      btn.style.color = "white";
    } else if (key === selected) {
      btn.style.backgroundColor = "#F44336";
      btn.style.color = "white";
    }
  }
  
  const expl = document.createElement("div");
  expl.className = "explanation";
  expl.innerHTML = `<strong><i class="fas fa-lightbulb"></i> ‡§µ‡•ç‡§Ø‡§æ‡§ñ‡•ç‡§Ø‡§æ:</strong><br>${(q.explanation || '‡§ï‡•ã‡§à ‡§µ‡•ç‡§Ø‡§æ‡§ñ‡•ç‡§Ø‡§æ ‡§®‡§π‡•Ä‡§Ç ‡§¶‡•Ä ‡§ó‡§à ‡§π‡•à').replace(/\n/g, "<br>")}`;
  optionsDiv.appendChild(expl);
  
  if (selected === q.correct) {
    correctCount++;
  } else {
    incorrectCount++;
  }
  
  const nextBtn = document.createElement("button");
  nextBtn.innerHTML = currentQuestion < questions.length - 1 ? 
    "<i class='fas fa-arrow-right'></i> ‡§Ö‡§ó‡§≤‡§æ ‡§™‡•ç‡§∞‡§∂‡•ç‡§®" : 
    "<i class='fas fa-check-circle'></i> ‡§ï‡•ç‡§µ‡§ø‡§ú‡§º ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡•á‡§Ç";
  nextBtn.className = "btn";
  nextBtn.style.marginTop = "20px";
  nextBtn.onclick = () => {
    currentQuestion++;
    if (currentQuestion >= questions.length) submitQuiz();
    else showQuestion();
  };
  optionsDiv.appendChild(nextBtn);
}

// ‡§ï‡•ç‡§µ‡§ø‡§ú‡§º ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡§®‡§æ
function submitQuiz() {
  const totalAnswered = correctCount + incorrectCount;
  const totalQuestions = questions.length;
  const accuracyPercent = totalAnswered > 0 ? Math.round((correctCount / totalAnswered) * 100) : 0;
  
  document.getElementById("totalQuestions").textContent = totalQuestions;
  document.getElementById("correctAnswers").textContent = correctCount;
  document.getElementById("incorrectAnswers").textContent = incorrectCount;
  document.getElementById("accuracyPercent").textContent = `${accuracyPercent}%`;
  document.getElementById("bigAccuracy").textContent = `${accuracyPercent}%`;
  
  const ctx = document.getElementById('resultChart').getContext('2d');
  new Chart(ctx, {
    type: 'doughnut',
    data: {
      labels: ['‡§∏‡§π‡•Ä ‡§â‡§§‡•ç‡§§‡§∞', '‡§ó‡§≤‡§§ ‡§â‡§§‡•ç‡§§‡§∞'],
      datasets: [{
        data: [correctCount, incorrectCount],
        backgroundColor: ['#4CAF50', '#F44336'],
        borderWidth: 0
      }]
    },
    options: {
      cutout: '65%',
      plugins: {
        legend: {
          position: 'bottom',
          labels: {
            font: {
              size: 14
            }
          }
        }
      }
    }
  });
  
  document.getElementById("practiceSection").style.display = "none";
  document.getElementById("resultSection").style.display = "block";
}

// ‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§ø‡§è ‡§ó‡§è ‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§ï‡•ã ‡§™‡§æ‡§∞‡•ç‡§∏ ‡§ï‡§∞‡§®‡§æ - ‡§∏‡•Å‡§ß‡§æ‡§∞‡§ø‡§§ ‡§∏‡§Ç‡§∏‡•ç‡§ï‡§∞‡§£
function parsePastedText() {
  const pasteText = document.getElementById("pasteArea").value.trim();
  if (!pasteText) {
    alert("‚ùó ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡§π‡§≤‡•á ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§ü‡•á‡§ï‡•ç‡§∏‡§ü ‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç!");
    return;
  }

  const lines = pasteText.split('\n').map(line => line.trim()).filter(line => line);
  
  // ‡§™‡§π‡§≤‡•Ä ‡§≤‡§æ‡§á‡§® ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§π‡•à
  const question = lines[0];
  
  // ‡§Ö‡§ó‡§≤‡•Ä 4 ‡§≤‡§æ‡§á‡§®‡•á‡§Ç ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ ‡§π‡•à‡§Ç
  const options = {A: "‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ A", B: "‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ B", C: "‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ C", D: "‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ D"};
  let optionIndex = 1;
  
  // ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™‡•ã‡§Ç ‡§ï‡•ã ‡§Ö‡§ß‡§ø‡§ï ‡§Æ‡§ú‡§¨‡•Ç‡§§‡•Ä ‡§∏‡•á ‡§™‡§æ‡§∞‡•ç‡§∏ ‡§ï‡§∞‡§®‡§æ
  for (let i = 1; i < lines.length && optionIndex <= 4; i++) {
    const line = lines[i];
    // ‡§Ø‡§¶‡§ø ‡§≤‡§æ‡§á‡§® ‡§Æ‡•á‡§Ç (A), (B) ‡§Ü‡§¶‡§ø ‡§π‡•à ‡§§‡•ã ‡§â‡§∏‡•á ‡§™‡§æ‡§∞‡•ç‡§∏ ‡§ï‡§∞‡•á‡§Ç
    if (line.match(/^\([A-D]\)/)) {
      const key = line.charAt(1);
      const value = line.substring(3).trim();
      options[key] = value;
      optionIndex++;
    }
    // ‡§Ø‡§¶‡§ø ‡§≤‡§æ‡§á‡§® ‡§Æ‡•á‡§Ç ‡§ï‡•á‡§µ‡§≤ A., B. ‡§Ü‡§¶‡§ø ‡§π‡•à ‡§§‡•ã ‡§â‡§∏‡•á ‡§™‡§æ‡§∞‡•ç‡§∏ ‡§ï‡§∞‡•á‡§Ç
    else if (line.match(/^[A-D]\./)) {
      const key = line.charAt(0);
      const value = line.substring(2).trim();
      options[key] = value;
      optionIndex++;
    }
  }
  
  // ‡§∏‡§π‡•Ä ‡§â‡§§‡•ç‡§§‡§∞ ‡§î‡§∞ ‡§µ‡•ç‡§Ø‡§æ‡§ñ‡•ç‡§Ø‡§æ ‡§¢‡•Ç‡§Ç‡§¢‡§®‡§æ
  let correct = "";
  let explanation = "";
  
  for (let i = 1; i < lines.length; i++) {
    if (lines[i].startsWith("‚úÖ ‡§∏‡§π‡•Ä ‡§â‡§§‡•ç‡§§‡§∞:") || 
        lines[i].startsWith("‡§∏‡§π‡•Ä ‡§â‡§§‡•ç‡§§‡§∞:") || 
        lines[i].startsWith("‡§â‡§§‡•ç‡§§‡§∞:")) {
      const match = lines[i].match(/[\( ]?([A-D])[\) ]?/);
      if (match) correct = match[1];
    } else if (lines[i].startsWith("üìò ‡§µ‡•ç‡§Ø‡§æ‡§ñ‡•ç‡§Ø‡§æ:") || 
               lines[i].startsWith("‡§µ‡•ç‡§Ø‡§æ‡§ñ‡•ç‡§Ø‡§æ:") || 
               lines[i].startsWith("Explanation:")) {
      explanation = lines[i].substring(lines[i].indexOf(':') + 1).trim();
      // ‡§¨‡§æ‡§ï‡•Ä ‡§≤‡§æ‡§á‡§®‡•ç‡§∏ ‡§ï‡•ã ‡§ú‡•ã‡§°‡§º‡§®‡§æ
      for (let j = i + 1; j < lines.length; j++) {
        explanation += '\n' + lines[j];
      }
      break;
    }
  }
  
  // ‡§´‡•â‡§∞‡•ç‡§Æ ‡§Æ‡•á‡§Ç ‡§≠‡§∞‡§®‡§æ
  document.getElementById("question").value = question;
  document.getElementById("optA").value = options.A;
  document.getElementById("optB").value = options.B;
  document.getElementById("optC").value = options.C;
  document.getElementById("optD").value = options.D;
  document.getElementById("correct").value = correct || "A";
  document.getElementById("explanation").value = explanation || "‡§µ‡•ç‡§Ø‡§æ‡§ñ‡•ç‡§Ø‡§æ ‡§Ø‡§π‡§æ‡§Å ‡§≤‡§ø‡§ñ‡•á‡§Ç";
  
  // ‡§™‡•á‡§∏‡•ç‡§ü ‡§ü‡•à‡§¨ ‡§∏‡•á ‡§ú‡•ã‡§°‡§º‡•á‡§Ç ‡§ü‡•à‡§¨ ‡§™‡§∞ ‡§∏‡•ç‡§µ‡§ø‡§ö ‡§ï‡§∞‡•á‡§Ç
  showTab('addTab');
  
  alert("‚úÖ ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§´‡•â‡§∞‡•ç‡§Æ ‡§Æ‡•á‡§Ç ‡§≠‡§∞ ‡§ó‡§Ø‡§æ! ‡§Ö‡§¨ '‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç' ‡§¨‡§ü‡§® ‡§¶‡§¨‡§æ‡§è‡§Å");
}

// ‡§ê‡§™ ‡§á‡§®‡§ø‡§∂‡§ø‡§Ø‡§≤‡§æ‡§á‡§ú‡§º ‡§ï‡§∞‡§®‡§æ
function populateQuiz() {
  try {
    const mode = localStorage.getItem("quizMode") || "input";
    const currentKey = `quiz_demo_demo`;
    
    let storedQuestions = localStorage.getItem(currentKey);
    try {
      questions = storedQuestions ? JSON.parse(storedQuestions) : [];
    } catch (e) {
      questions = [];
      console.error("‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§™‡§æ‡§∞‡•ç‡§∏ ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø:", e);
    }
    
    currentQuestion = 0;
    correctCount = 0;
    incorrectCount = 0;
    editIndex = -1;
    currentImage = null;
    
    if (mode === "input") {
      document.getElementById("inputSection").style.display = "block";
      document.getElementById("practiceSection").style.display = "none";
      document.getElementById("resultSection").style.display = "none";
      document.getElementById("questionCount").textContent = `üî¢ ‡§ï‡•Å‡§≤ ‡§™‡•ç‡§∞‡§∂‡•ç‡§®: ${questions.length}`;
      showAllQuestions();
    } else {
      if (questions.length === 0) {
        alert("‚ùó ‡§ï‡•ã‡§à ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ! ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡§π‡§≤‡•á ‡§ï‡•Å‡§õ ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§ú‡•ã‡§°‡§º‡•á‡§Ç‡•§");
        localStorage.setItem("quizMode", "input");
        populateQuiz();
      } else {
        document.getElementById("inputSection").style.display = "none";
        document.getElementById("practiceSection").style.display = "block";
        document.getElementById("resultSection").style.display = "none";
        showQuestion();
      }
    }
  } catch (error) {
    console.error(error);
    alert("‡§§‡•ç‡§∞‡•Å‡§ü‡§ø: " + error.message);
    showWelcomeScreen();
  }
}

// ‡§™‡•á‡§ú ‡§≤‡•ã‡§° ‡§π‡•ã‡§®‡•á ‡§™‡§∞ ‡§ê‡§™ ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç
window.onload = function() {
  showWelcomeScreen();
};
</script>
</body>
</html>
